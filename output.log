gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector -fno-pie -no-pie   -c -o ps.o ps.c
ld -m    elf_i386 -N -e main -Ttext 0 -o _ps ps.o ulib.o usys.o printf.o umalloc.o
objdump -S _ps > ps.asm
objdump -t _ps | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > ps.sym
./mkfs fs.img README _cat _echo _forktest _grep _init _kill _ln _ls _mkdir _rm _sh _stressfs _usertests _wc _zombie _freemem _testexit _crc32 _spin _tickets _ps 
nmeta 59 (boot, super, log blocks 30 inode blocks 26, bitmap blocks 1) blocks 941 total 1000
balloc: first 878 blocks have been allocated
balloc: write bitmap block at sector 58
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 1 -m 512 
xv6...
cpu0: starting 0
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ tickets 30 spin & 
$ tickets 20 spin & 
$ tickets 10 spin & 
$ ps -r
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 817
6 20 618
8 10 447
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 850
6 20 671
8 10 509
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 873
6 20 712
8 10 556
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 899
6 20 748
8 10 596
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 943
6 20 827
8 10 682
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 974
6 20 881
8 10 739
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1003
6 20 933
8 10 799
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1045
6 20 998
8 10 868
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1068
6 20 1039
8 10 916
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1089
6 20 1076
8 10 961
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1156
6 20 1188
8 10 1085
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1199
6 20 1271
8 10 1179
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1226
6 20 1321
8 10 1241
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1252
6 20 1361
8 10 1294
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1381
6 20 1562
8 10 1532
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1439
6 20 1664
8 10 1653
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1524
6 20 1792
8 10 1803
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1551
6 20 1843
8 10 1863
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1577
6 20 1885
8 10 1907
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1608
6 20 1930
8 10 1957
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1670
6 20 2023
8 10 2066
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1701
6 20 2067
8 10 2116
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1750
6 20 2155
8 10 2214
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1772
6 20 2191
8 10 2257
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1825
6 20 2272
8 10 2360
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1848
6 20 2311
8 10 2406
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1895
6 20 2376
8 10 2484
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1943
6 20 2446
8 10 2566
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1975
6 20 2493
8 10 2625
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 1998
6 20 2527
8 10 2668
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2038
6 20 2595
8 10 2742
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2108
6 20 2697
8 10 2865
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2145
6 20 2759
8 10 2935
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2170
6 20 2793
8 10 2979
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2189
6 20 2836
8 10 3024
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2241
6 20 2918
8 10 3119
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2287
6 20 2995
8 10 3216
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2320
6 20 3043
8 10 3269
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2362
6 20 3123
8 10 3362
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2385
6 20 3157
8 10 3407
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2410
6 20 3199
8 10 3457
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2482
6 20 3302
8 10 3580
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2520
6 20 3372
8 10 3664
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2643
6 20 3579
8 10 3913
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2726
6 20 3721
8 10 4086
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2746
6 20 3763
8 10 4136
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2771
6 20 3804
8 10 4186
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2829
6 20 3890
8 10 4286
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2865
6 20 3949
8 10 4359
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2894
6 20 3998
8 10 4422
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2918
6 20 4046
8 10 4477
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 2987
6 20 4152
8 10 4598
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3020
6 20 4208
8 10 4667
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3090
6 20 4317
8 10 4814
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3112
6 20 4351
8 10 4858
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3168
6 20 4430
8 10 4953
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3191
6 20 4468
8 10 4998
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3213
6 20 4516
8 10 5059
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3266
6 20 4596
8 10 5153
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3302
6 20 4658
8 10 5229
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3328
6 20 4700
8 10 5280
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3377
6 20 4779
8 10 5372
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3402
6 20 4816
8 10 5416
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3446
6 20 4882
8 10 5487
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3469
6 20 4925
8 10 5539
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3499
6 20 4971
8 10 5593
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3531
6 20 5019
8 10 5649
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3582
6 20 5105
8 10 5752
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3606
6 20 5152
8 10 5806
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3655
6 20 5226
8 10 5891
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3681
6 20 5271
8 10 5945
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3708
6 20 5313
8 10 5992
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3736
6 20 5373
8 10 6065
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3793
6 20 5463
8 10 6166
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3820
6 20 5509
8 10 6220
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3864
6 20 5573
8 10 6293
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3918
6 20 5664
8 10 6402
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3948
6 20 5708
8 10 6454
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 3981
6 20 5762
8 10 6516
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4030
6 20 5842
8 10 6616
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4069
6 20 5913
8 10 6700
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4105
6 20 5977
8 10 6771
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4152
6 20 6053
8 10 6864
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4199
6 20 6135
8 10 6959
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4237
6 20 6193
8 10 7031
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4266
6 20 6237
8 10 7085
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4314
6 20 6308
8 10 7161
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4355
6 20 6378
8 10 7237
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4420
6 20 6486
8 10 7370
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4456
6 20 6545
8 10 7442
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4502
6 20 6630
8 10 7548
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4547
6 20 6713
8 10 7641
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4661
6 20 6906
8 10 7876
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4687
6 20 6945
8 10 7927
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4729
6 20 7024
8 10 8023
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4756
6 20 7072
8 10 8079
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4802
6 20 7140
8 10 8151
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4825
6 20 7181
8 10 8205
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4851
6 20 7223
8 10 8255
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4878
6 20 7259
8 10 8293
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4907
6 20 7302
8 10 8341
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 4967
6 20 7405
8 10 8458
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5073
6 20 7585
8 10 8671
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5135
6 20 7678
8 10 8790
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5166
6 20 7738
8 10 8856
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5191
6 20 7780
8 10 8907
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5219
6 20 7822
8 10 8957
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5251
6 20 7880
8 10 9019
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5276
6 20 7926
8 10 9075
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5314
6 20 7985
8 10 9141
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5374
6 20 8075
8 10 9244
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5414
6 20 8149
8 10 9333
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5482
6 20 8263
8 10 9470
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5520
6 20 8328
8 10 9548
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5563
6 20 8398
8 10 9632
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5590
6 20 8445
8 10 9688
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5617
6 20 8485
8 10 9732
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5642
6 20 8524
8 10 9779
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5666
6 20 8563
8 10 9832
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5689
6 20 8602
8 10 9877
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5724
6 20 8663
8 10 9949
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5765
6 20 8731
8 10 10028
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5813
6 20 8811
8 10 10120
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5849
6 20 8874
8 10 10197
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5893
6 20 8952
8 10 10290
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5957
6 20 9053
8 10 10412
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 5990
6 20 9097
8 10 10466
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6018
6 20 9142
8 10 10521
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6042
6 20 9183
8 10 10571
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6089
6 20 9261
8 10 10668
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6149
6 20 9359
8 10 10783
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6212
6 20 9459
8 10 10903
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6236
6 20 9494
8 10 10946
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6261
6 20 9530
8 10 10987
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6312
6 20 9632
8 10 11114
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6387
6 20 9765
8 10 11272
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6425
6 20 9839
8 10 11361
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6465
6 20 9916
8 10 11457
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6494
6 20 9958
8 10 11509
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6575
6 20 10082
8 10 11662
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6615
6 20 10146
8 10 11739
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6656
6 20 10207
8 10 11809
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6684
6 20 10259
8 10 11866
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6710
6 20 10296
8 10 11908
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6773
6 20 10416
8 10 12036
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6830
6 20 10509
8 10 12144
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6861
6 20 10557
8 10 12197
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6889
6 20 10603
8 10 12251
PID TICKETS TICKS
1 1 1
2 1 0
9 1 0
4 30 6914
6 20 10645
8 10 12297
QEMU 2.3.0 monitor - type 'help' for more information
(qemu) q[K
